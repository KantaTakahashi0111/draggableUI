(window.webpackJsonpkensan=window.webpackJsonpkensan||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/plus-icon.ab0afe9f.svg"},13:function(e,t,n){e.exports=n.p+"static/media/copy-icon.58bed3d9.svg"},14:function(e,t,n){e.exports=n.p+"static/media/trash-icon.2b32eb47.svg"},22:function(e,t,n){e.exports=n.p+"static/media/menu-icon.2f39056e.svg"},24:function(e,t,n){e.exports=n(34)},29:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(19),r=n.n(o),s=(n(29),n(4)),c=n(5),m=n(7),l=n(6),u=n(8),I=n(23),d=n(3),f=n(22),p=n.n(f),y=function(){return i.a.createElement("div",{className:"processMenu"},i.a.createElement("ul",{className:"processMenu__list"},i.a.createElement("li",{className:"processMenu__item"},i.a.createElement("button",{className:"processMenu__button"},"\u30bb\u30c3\u30c8\u4f5c\u6210")),i.a.createElement("li",{className:"processMenu__item"},i.a.createElement("button",{className:"processMenu__button"},"\u30bb\u30c3\u30c8\u914d\u7f6e"))))},v=function(){return i.a.createElement("ul",{className:"processMenuBar"},i.a.createElement("li",{className:"processMenuBar__item processMenuBar__item--active"}),i.a.createElement("li",{className:"processMenuBar__item"}))},h=function(){return i.a.createElement("header",{className:"kensanHeader"},i.a.createElement("div",{className:"kensanHeader__buttonArea"},i.a.createElement("div",{className:"menuButtonContainer"},i.a.createElement("button",{className:"menuButton"},i.a.createElement("img",{src:p.a,alt:"menu",className:"menuButton__image"}))),i.a.createElement(y,null)),i.a.createElement(v,null))},b=n(10),E={ItemType:{Item:"item",InnerItem:"InnerItem",Set:"set"},APP_HEADER_HEIGHT:40,SET_HEADER_HEIGHT:40,ITEM_GRID_X:200,SET_GRID_X:300},_=n(12),g=n.n(_),k=n(13),S=n.n(k),O=n(14),T=n.n(O),C=function(e){var t=e.iconSrc,n=e.alt,a=e.onClick;return i.a.createElement("li",{className:"menuItem"},i.a.createElement("button",{type:"button",className:"menuItem__button",onClick:a},i.a.createElement("img",{src:t,alt:n,className:"worSpaceMenu__icon"})))},j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={position:{top:15,left:15}},n.menus=[{iconSrc:g.a,alt:"\u8ffd\u52a0",onClick:function(){}},{iconSrc:S.a,alt:"\u8907\u88fd",onClick:function(){}},{iconSrc:T.a,alt:"\u524a\u9664",onClick:function(){}}],n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("ul",{className:"setWorkSpaceMenu",style:this.state.position},this.menus.map((function(e){return i.a.createElement(C,{key:e.alt,alt:e.alt,iconSrc:e.iconSrc,onClick:e.onClick})})))}}]),t}(a.Component),N=function(e){var t=e.itemInfo,n=e.position,a=e.type,o=e.innerItemInfo,r=Object(d.c)({item:{type:a,info:t,innerItemInfo:o},collect:function(e){return{isDragging:!!e.isDragging()}}}),s=Object(b.a)(r,2),c=s[0].isDragging,m=s[1],l={opacity:c?.5:1,top:n.y,left:n.x},u=Object.assign(l,t.style);return i.a.createElement("section",{className:"item",style:u,ref:m},i.a.createElement("h2",{className:"item__name"},t.name))};N.defaultProps={innerItemInfo:{innerItemId:-1,setId:-1}};var D=N,M=function(e){var t=e.setInfo,n=e.onDrop,a=e.items,o=e.position,r=e.onInnerMove,s=e.onTransfer,c=Object(d.d)({accept:[E.ItemType.Item,E.ItemType.InnerItem],drop:function(e,a){var i=a.getSourceClientOffset();if(e.type===E.ItemType.Item)n(t.set_id,e.info.item_id,i);else{if(e.innerItemInfo.setId===t.set_id)return void r(e.innerItemInfo.setId,e.innerItemInfo.innerItemId,i);s(t.set_id,e.innerItemInfo,i)}},collect:function(e){return{isOver:!!e.isOver()}}}),m=Object(b.a)(c,2),l=m[0].isOver,u=m[1],I=Object(d.c)({item:{type:E.ItemType.Set,setInfo:t},collect:function(e){return{isDragging:!!e.isDragging()}}}),f=Object(b.a)(I,2),p=f[0].isDragging,y=f[1],v={backgroundColor:l?"#FFEFFB":"white",top:o.y,left:o.x,opacity:p?.5:1},h=Object.assign(v,t.style);return i.a.createElement("section",{className:"set",style:h,ref:y},i.a.createElement("h2",{className:"set__name",style:{backgroundColor:t.color}},t.name),i.a.createElement("ul",{className:"set__itemList",ref:u},t.containedItems.map((function(e,n){return i.a.createElement(D,{key:n,innerItemInfo:{innerItemId:n,setId:t.set_id},itemInfo:a.find((function(t){return t.item_id===e.itemId})),position:e.position,type:E.ItemType.InnerItem})}))))},F=function(e){var t=e.sets,n=e.onDrop,a=e.items,o=e.onTrash,r=e.onInnerMove,s=e.onTransfer,c=e.onSetMove,m=Object(d.d)({accept:[E.ItemType.InnerItem,E.ItemType.Set],drop:function(e,t){var n=t.getSourceClientOffset();switch(e.type){case E.ItemType.InnerItem:t.didDrop()||o(e.innerItemInfo.setId,e.innerItemInfo.innerItemId);break;case E.ItemType.Set:c(e.setInfo.set_id,n);break;default:return}},collect:function(e){return{isOver:e.isOver({shallow:!0})}}}),l=Object(b.a)(m,2),u=l[0].isOver,I=l[1],f={backgroundColor:u?"#FFEFFB":"white"};return i.a.createElement("div",{className:"setWorkSpace",style:f,ref:I},i.a.createElement(j,null),t.map((function(e){return i.a.createElement(M,{key:e.set_id,setInfo:e,onDrop:n,items:a,position:e.position,onInnerMove:r,onTransfer:s})})))},x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={},n.menus=[{iconSrc:g.a,alt:"\u8ffd\u52a0",onClick:function(){}},{iconSrc:S.a,alt:"\u8907\u88fd",onClick:function(){}},{iconSrc:T.a,alt:"\u524a\u9664",onClick:function(){}}],n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("ul",{className:"itemWorkSpaceMenu",style:this.state.position},this.menus.map((function(e){return i.a.createElement(C,{key:e.alt,alt:e.alt,iconSrc:e.iconSrc,onClick:e.onClick})})))}}]),t}(a.Component),w=function(e){function t(e){return Object(s.a)(this,t),Object(m.a)(this,Object(l.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.items;return i.a.createElement("div",{className:"itemWorkSpace"},i.a.createElement(x,null),i.a.createElement("div",{className:"itemContainer"},e.map((function(e){return i.a.createElement(D,{key:e.item_id,itemInfo:e,position:e.position,type:E.ItemType.Item})}))))}}]),t}(a.Component),H=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(l.a)(t).call(this,e))).state={a:1,sets:[{set_id:1,name:"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0A",color:"#F19F4D",position:{x:50,y:80},style:{border:"3px solid #F19F4D"},containedItems:[]},{set_id:10,name:"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0B",color:"#8FE23C",position:{x:350,y:80},style:{border:"3px solid #8FE23C"},containedItems:[]}],items:[{item_id:1,name:"\u8179\u7b4b\u30ed\u30fc\u30e9\u30fc",color:"#F271D8",position:{x:20,y:20},style:{backgroundColor:"#F271D8"}},{item_id:10,name:"\u30d9\u30f3\u30c1\u30d7\u30ec\u30b9",color:"#4DC4F1",position:{x:200,y:20},style:{backgroundColor:"#4DC4F1"}}]},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getContainedItemId",value:function(e,t){return this.getSetbyId(e).containedItems[t].itemId}},{key:"getSetbyId",value:function(e){return this.state.sets.find((function(t){return t.set_id===e}))}},{key:"getRelativeSetPosition",value:function(e){return{x:e.x,y:e.y-E.APP_HEADER_HEIGHT}}},{key:"getRelativePosition",value:function(e,t){var n=this.getSetbyId(e);return{x:t.x-n.position.x,y:t.y-n.position.y-E.SET_HEADER_HEIGHT}}},{key:"removeItemFromSet",value:function(e,t){console.log({setId:e,innerItemId:t});var n=this.getSetbyId(e),a=n.containedItems.filter((function(e,n){return n!==t}));n.containedItems=a,this.forceUpdate()}},{key:"addItemToSet",value:function(e,t,n){var a=this.getSetbyId(e),i={itemId:t,position:this.getRelativePosition(e,n)};a.containedItems.push(i)}},{key:"handleSetMove",value:function(e,t){this.getSetbyId(e).position=this.getRelativeSetPosition(t)}},{key:"handleItemDrop",value:function(e,t,n){this.addItemToSet(e,t,n)}},{key:"handleInnerMove",value:function(e,t,n){this.getSetbyId(e).containedItems.find((function(e,n){return n===t})).position=this.getRelativePosition(e,n)}},{key:"handleItemTrash",value:function(e,t){this.removeItemFromSet(e,t)}},{key:"handleItemTransfer",value:function(e,t,n){var a=this.getContainedItemId(t.setId,t.innerItemId);this.removeItemFromSet(t.setId,t.innerItemId),this.addItemToSet(e,a,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.sets,a=t.items;return i.a.createElement(d.b,{backend:I.a},i.a.createElement("div",{className:"kensanApp"},i.a.createElement(h,null),i.a.createElement(F,{sets:n,items:a,onDrop:function(t,n,a){e.handleItemDrop(t,n,a)},onTrash:function(t,n){e.handleItemTrash(t,n)},onInnerMove:function(t,n,a){e.handleInnerMove(t,n,a)},onTransfer:function(t,n,a){e.handleItemTransfer(t,n,a)},onSetMove:function(t,n){e.handleSetMove(t,n)}}),i.a.createElement(w,{items:a})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.2797c27b.chunk.js.map