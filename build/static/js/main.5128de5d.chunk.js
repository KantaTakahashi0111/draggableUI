(window.webpackJsonpkensan=window.webpackJsonpkensan||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/plus-icon.ab0afe9f.svg"},13:function(e,t,n){e.exports=n.p+"static/media/copy-icon.58bed3d9.svg"},14:function(e,t,n){e.exports=n.p+"static/media/trash-icon.2b32eb47.svg"},22:function(e,t,n){e.exports=n.p+"static/media/menu-icon.2f39056e.svg"},24:function(e,t,n){e.exports=n(34)},29:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(19),s=n.n(o),c=(n(29),n(4)),r=n(5),l=n(7),m=n(6),u=n(8),I=n(23),d=n(3),f=n(22),p=n.n(f),h=function(){return i.a.createElement("div",{className:"processMenu"},i.a.createElement("ul",{className:"processMenu__list"},i.a.createElement("li",{className:"processMenu__item"},i.a.createElement("button",{className:"processMenu__button"},"\u30bb\u30c3\u30c8\u4f5c\u6210")),i.a.createElement("li",{className:"processMenu__item"},i.a.createElement("button",{className:"processMenu__button"},"\u30bb\u30c3\u30c8\u914d\u7f6e"))))},E=function(){return i.a.createElement("ul",{className:"processMenuBar"},i.a.createElement("li",{className:"processMenuBar__item processMenuBar__item--active"}),i.a.createElement("li",{className:"processMenuBar__item"}))},v=function(){return i.a.createElement("header",{className:"kensanHeader"},i.a.createElement("div",{className:"kensanHeader__buttonArea"},i.a.createElement("div",{className:"menuButtonContainer"},i.a.createElement("button",{className:"menuButton"},i.a.createElement("img",{src:p.a,alt:"menu",className:"menuButton__image"}))),i.a.createElement(h,null)),i.a.createElement(E,null))},_=n(10),g={ItemType:{Item:"item",InnerItem:"InnerItem",Set:"set"},APP_HEADER_HEIGHT:40,SET_HEADER_HEIGHT:40,ITEM_GRID_X:180,ITEM_Y:20,ITEM_WORKSPACE_PADDING_LEFT:20,SET_GRID_X:300,SET_Y:80,WORKSPACE_PADDING_LEFT:50,SET_COLORS:["#F19F4D","#8FE23C","red"],ITEM_COLORS:["#F271D8","#3BF8A6","#4DC4F1","#56D069","#4A78CE","#E3468F"],ITEM_NAMES:["\u8179\u7b4b\u30ed\u30fc\u30e9\u30fc","\u30b5\u30a4\u30c9\u30d9\u30f3\u30c8","\u30d9\u30f3\u30c1\u30d7\u30ec\u30b9","\u30c0\u30f3\u30d9\u30eb\u30ab\u30fc\u30eb","\u30d5\u30ec\u30f3\u30c1\u30d7\u30ec\u30b9","\u30b7\u30e5\u30e9\u30c3\u30b0","\u30b9\u30af\u30ef\u30c3\u30c8","\u30ef\u30f3\u30cf\u30f3\u30c9\u30ed\u30fc\u30a4\u30f3\u30b0"]},y=n(12),S=n.n(y),k=n(13),b=n.n(k),C=n(14),T=n.n(C),O=function(e){var t=e.iconSrc,n=e.alt,a=e.onClick;return i.a.createElement("li",{className:"menuItem"},i.a.createElement("button",{type:"button",className:"menuItem__button",onClick:a},i.a.createElement("img",{src:t,alt:n,className:"worSpaceMenu__icon"})))},N=function(e){var t=e.onPlusClick,n=[{iconSrc:S.a,alt:"\u8ffd\u52a0",onClick:t},{iconSrc:b.a,alt:"\u8907\u88fd",onClick:function(){}},{iconSrc:T.a,alt:"\u524a\u9664",onClick:function(){}}];return i.a.createElement("ul",{className:"setWorkSpaceMenu",style:{top:15,left:15}},n.map((function(e){return i.a.createElement(O,{key:e.alt,alt:e.alt,iconSrc:e.iconSrc,onClick:e.onClick})})))},M=(a.Component,function(e){var t=e.itemInfo,n=e.position,a=e.type,o=e.innerItemInfo,s=(e.onItemNameChange,Object(d.c)({item:{type:a,info:t,innerItemInfo:o},collect:function(e){return{isDragging:!!e.isDragging()}}})),c=Object(_.a)(s,2),r=c[0].isDragging,l=c[1],m={opacity:r?.5:1,top:n.y,left:n.x},u=Object.assign(m,t.style);return i.a.createElement("section",{className:"item",style:u,ref:l},i.a.createElement("h2",{className:"item__name"},t.name))});M.defaultProps={innerItemInfo:{innerItemId:-1,setId:-1}};var D=M,P=function(e){var t=e.setInfo,n=e.onDrop,a=e.items,o=e.position,s=e.onInnerMove,c=e.onTransfer,r=Object(d.d)({accept:[g.ItemType.Item,g.ItemType.InnerItem],drop:function(e,a){var i=a.getSourceClientOffset();if(e.type===g.ItemType.Item)n(t.set_id,e.info.item_id,i);else{if(e.innerItemInfo.setId===t.set_id)return void s(e.innerItemInfo.setId,e.innerItemInfo.innerItemId,i);c(t.set_id,e.innerItemInfo,i)}},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(_.a)(r,2),m=l[0].isOver,u=l[1],I=Object(d.c)({item:{type:g.ItemType.Set,setInfo:t},collect:function(e){return{isDragging:!!e.isDragging()}}}),f=Object(_.a)(I,2),p=f[0].isDragging,h=f[1],E={backgroundColor:m?"#FFEFFB":"white",top:o.y,left:o.x,opacity:p?.5:1},v=Object.assign(E,t.style);return i.a.createElement("section",{className:"set",style:v,ref:h},i.a.createElement("h2",{className:"set__name",style:{backgroundColor:t.color}},t.name),i.a.createElement("ul",{className:"set__itemList",ref:u},t.containedItems.map((function(e,n){return i.a.createElement(D,{key:n,innerItemInfo:{innerItemId:n,setId:t.set_id},itemInfo:a.find((function(t){return t.item_id===e.itemId})),position:e.position,type:g.ItemType.InnerItem})}))))},j=function(e){var t=e.sets,n=e.onDrop,a=e.items,o=e.onTrash,s=e.onInnerMove,c=e.onTransfer,r=e.onSetMove,l=e.onPlusClick,m=Object(d.d)({accept:[g.ItemType.InnerItem,g.ItemType.Set],drop:function(e,t){var n=t.getSourceClientOffset();switch(e.type){case g.ItemType.InnerItem:t.didDrop()||o(e.innerItemInfo.setId,e.innerItemInfo.innerItemId);break;case g.ItemType.Set:r(e.setInfo.set_id,n);break;default:return}},collect:function(e){return{isOver:e.isOver({shallow:!0})}}}),u=Object(_.a)(m,2),I=u[0].isOver,f=u[1],p={backgroundColor:I?"#FFEFFB":"white"};return i.a.createElement("div",{className:"setWorkSpace",style:p,ref:f},i.a.createElement(N,{onPlusClick:l}),t.map((function(e){return i.a.createElement(P,{key:e.set_id,setInfo:e,onDrop:n,items:a,position:e.position,onInnerMove:s,onTransfer:c})})))},R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},n.menus=[{iconSrc:S.a,alt:"\u8ffd\u52a0",onClick:n.props.onPlusClick},{iconSrc:b.a,alt:"\u8907\u88fd",onClick:function(){}},{iconSrc:T.a,alt:"\u524a\u9664",onClick:function(){}}],n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("ul",{className:"itemWorkSpaceMenu",style:this.state.position},this.menus.map((function(e){return i.a.createElement(O,{key:e.alt,alt:e.alt,iconSrc:e.iconSrc,onClick:e.onClick})})))}}]),t}(a.Component),F=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.onItemNameChange,a=e.onItemPlusClick;return i.a.createElement("div",{className:"itemWorkSpace"},i.a.createElement(R,{onPlusClick:a}),i.a.createElement("div",{className:"itemContainer"},t.map((function(e){return i.a.createElement(D,{key:e.item_id,itemInfo:e,position:e.position,type:g.ItemType.Item,onItemNameChange:n})}))))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={a:1,sets:[],items:[]},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"changeItemName",value:function(e,t){this.getItembyId(e).name=t,console.log(t)}},{key:"changeSetName",value:function(e,t){this.getSetbyId(e).name=t,console.log(t)}},{key:"createSet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",a=this.state.sets,i={set_id:a.length,name:t,position:e,color:n,style:{border:"3px solid ".concat(n)},containedItems:[]},o=a.concat(i);this.setState({sets:o})}},{key:"createItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",a=this.state.items,i={item_id:a.length,name:t,color:n,position:e,style:{backgroundColor:n}},o=a.concat(i);this.setState({items:o})}},{key:"getContainedItemId",value:function(e,t){return this.getSetbyId(e).containedItems[t].itemId}},{key:"getSetbyId",value:function(e){return this.state.sets.find((function(t){return t.set_id===e}))}},{key:"getItembyId",value:function(e){return this.state.items.find((function(t){return t.item_id===e}))}},{key:"getRelativeSetPosition",value:function(e){var t=window.scrollY;return{x:e.x,y:e.y-g.APP_HEADER_HEIGHT+t}}},{key:"getRelativePosition",value:function(e,t){var n=window.scrollY,a=this.getSetbyId(e);return{x:t.x-a.position.x,y:t.y-a.position.y-g.SET_HEADER_HEIGHT+n}}},{key:"removeItemFromSet",value:function(e,t){console.log({setId:e,innerItemId:t});var n=this.getSetbyId(e),a=n.containedItems.filter((function(e,n){return n!==t}));n.containedItems=a,this.forceUpdate()}},{key:"addItemToSet",value:function(e,t,n){var a=this.getSetbyId(e),i={itemId:t,position:this.getRelativePosition(e,n)};a.containedItems.push(i)}},{key:"handleSetMove",value:function(e,t){this.getSetbyId(e).position=this.getRelativeSetPosition(t)}},{key:"handleItemDrop",value:function(e,t,n){this.addItemToSet(e,t,n)}},{key:"handleInnerMove",value:function(e,t,n){this.getSetbyId(e).containedItems.find((function(e,n){return n===t})).position=this.getRelativePosition(e,n)}},{key:"handleItemTrash",value:function(e,t){this.removeItemFromSet(e,t)}},{key:"handleItemTransfer",value:function(e,t,n){var a=this.getContainedItemId(t.setId,t.innerItemId);this.removeItemFromSet(t.setId,t.innerItemId),this.addItemToSet(e,a,n)}},{key:"handleSetPlusClick",value:function(){var e={x:this.state.sets.length*g.SET_GRID_X+g.WORKSPACE_PADDING_LEFT,y:g.SET_Y},t="\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0".concat(this.state.sets.length+1),n=g.SET_COLORS[this.state.sets.length%g.SET_COLORS.length];this.createSet(e,t,n)}},{key:"handleItemPlusClick",value:function(){var e={x:this.state.items.length*g.ITEM_GRID_X+g.ITEM_WORKSPACE_PADDING_LEFT,y:g.ITEM_Y},t=g.ITEM_NAMES[this.state.items.length%g.ITEM_NAMES.length],n=g.ITEM_COLORS[this.state.items.length%g.ITEM_COLORS.length];console.log("plus"),this.createItem(e,t,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.sets,a=t.items;return i.a.createElement(d.b,{backend:I.a},i.a.createElement("div",{className:"kensanApp"},i.a.createElement(v,null),i.a.createElement(j,{sets:n,items:a,onDrop:function(t,n,a){e.handleItemDrop(t,n,a)},onTrash:function(t,n){e.handleItemTrash(t,n)},onInnerMove:function(t,n,a){e.handleInnerMove(t,n,a)},onTransfer:function(t,n,a){e.handleItemTransfer(t,n,a)},onSetMove:function(t,n){e.handleSetMove(t,n)},onPlusClick:function(){e.handleSetPlusClick()},onItemNameChange:function(t,n){e.ItemNameChange(t,n)}}),i.a.createElement(F,{items:a,onItemPlusClick:function(){e.handleItemPlusClick()}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.5128de5d.chunk.js.map